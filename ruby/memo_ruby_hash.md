# ハッシュ（連想配列）のメモ
- [基本](#基本)
- [追加](#追加)
- [削除](#削除)
- [更新](#更新)
- [繰り返し](#繰り返し)
- [並び替え](#並び替え)


# 基本

## 作り方

```ruby
# 普通の書き方
enemy_hash = {"ザコ" => "スライム", "中ボス" => "ドラゴン", "ラスボス" => "魔王"}
p enemy_hash

# キーはシンボルでも可能
enemy_hash = { :ザコ => "スライム", :中ボス => "ドラゴン", :ラスボス => "魔王"}

# キーがシンボルの場合は省略形が使える（コロン「:」の位置が逆になる）
enemy_hash = { ザコ:  "スライム", 中ボス: "ドラゴン", ラスボス: "魔王"}
```

## 呼び出し方

```ruby
## 基本
enemy_hash = {"ザコ" => "スライム", "中ボス" => "ドラゴン", "ラスボス" => "魔王"}
puts enemy_hash["ザコ"]
# => スライム

## キーがシンボルの場合
enemy_hash = { ザコ:  "スライム", 中ボス: "ドラゴン", ラスボス: "魔王"}
puts enemy_hash[:ザコ]

# ハッシュのキーを変数で呼び出す
level ="ザコ"
puts enemy_hash[level]
```
# 取得
- 基本の取得
```ruby
オブジェクト.keys
オブジェクト.values
```
```ruby
hash = { key1: "ruby", key2: "python", key3: "java"}
puts hash.keys
# => [:key1, :key2, :key3]

puts hash.values
# => ["ruby", "python", "java"]

p hash.values[2]    #インデックスで指定する
# => "java"

```

- selectで条件で取得する
```ruby
hash = { key1: "ruby", key2: "python", key3: "java"}
p hash.select{ |key, value| value == "ruby" }
# => {:key1=>"ruby"}
```

# 追加
```ruby
enemies = { "中ボス" => "ドラゴン", "ラスボス" => "魔王"}
enemies["ザコ2"] = "メタルモンスター"
p enemies
# => { "中ボス" => "ドラゴン", "ラスボス" => "魔王", "ザコ2" => "メタルモンスター"}
```
# 削除
- deleteメソッド
```ruby
enemies = {"ザコ" => "スライム", "中ボス" => "ドラゴン", "ラスボス" => "魔王"}
enemies.delete("ザコ")
p enemies
# => { "中ボス" => "ドラゴン", "ラスボス" => "魔王"}
```

# 更新
```ruby
enemies = {"ザコ" => "スライム", "中ボス" => "ドラゴン", "ラスボス" => "魔王"}
enemies["中ボス"] = "レッドドラゴン"
p enemies
# => {"ザコ" => "スライム", "中ボス" => "レッドドラゴン", "ラスボス" => "魔王"}
```

# 繰り返し
## 値を取得
- keyとvalueをどちらも取得
```ruby
enemies = { ザコ:  "スライム", 中ボス: "ドラゴン", ラスボス: "魔王"}

enemies.each do |rank, enemy|
	puts "#{rank}の#{enemy}が、現れた！"
end
# =>
# ザコのスライムが、現れた！
# 中ボスのドラゴンが、現れた！
# ラスボスの魔王が、現れた！
```
- keyのみ取得(each_keyメソッド)
```ruby
enemies = { ザコ:  "スライム", 中ボス: "ドラゴン", ラスボス: "魔王"}

enemies.each_key do |rank|
	puts "#{rank}が、現れた！"
end

# =>
# ザコが、現れた！
# 中ボスが、現れた！
# ラスボスが、現れた！
```

- valueのみ取得
```ruby
enemies = { ザコ:  "スライム", 中ボス: "ドラゴン", ラスボス: "魔王"}

enemies.each_value do |enemy|
	puts "#{enemy}が、現れた！"
end

# =>
# スライムが、現れた！
# ドラゴンが、現れた！
# 魔王が、現れた！
```

# 並び替え
- 【注意】 ハッシュをsortメソッドで並べ替えると配列になる！

## sortメソッド(keyで並び替える)
- 昇順に並び替える
  
  sortメソッドで配列になるが、`to_hメソット`を使うことでハッシュに戻せる
```ruby
items = {"りんご" => 40, "バナナ" =>12, "いちご" =>99}
p items.sort
# => [["いちご", 99], ["りんご", 40], ["バナナ", 12]]

p items.sort.to_h
# => {"いちご"=>99, "りんご"=>40, "バナナ"=>12}
```

## sort_byメソッド(valueで並び替える)
- keyでもvalueでも並べ替えができる
- ブロック変数に"-"をつけることで降順にできる
```ruby
items = {"りんご" => 40, "バナナ" =>12, "いちご" =>99}
p items.sort_by {|k, v| v } #配列になるので注意
# =>[["バナナ", 12], ["りんご", 40], ["いちご", 99]]

# ハッシュに戻す
p items.sort_by {|k, v| v }.to_h
# => {"バナナ"=>12, "りんご"=>40, "いちご"=>99}

# 降順に並び替えてハッシュに戻す
p items.sort_by {|k, v| -v }.to_h
# => {"いちご"=>99, "りんご"=>40, "バナナ"=>12}
```